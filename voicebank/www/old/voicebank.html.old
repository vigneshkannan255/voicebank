<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dubbing Artist Information</title>
<link rel="stylesheet" href="voice.css">
{% extends "templates/web.html" %}
</head>
<body>
{% block page_content %}
<script>
frappe.ready(function() {
	$('.btn-more').on('click', function() {
		frappe.call({
			method: 'voicebank.www.voicebank.search',
			args: {
				query: '{{ query }}',
				category: '{{ category }}'
			},
			callback: function(r) {
				$(r.message.results).appendTo('.search-result');
				$('.btn-more').toggleClass('hidden', !!!r.message.has_more);
			}
		});
	});
});
</script>
{% endblock %}
{% block content %}
<div class="search-result">
	{% include "voicebank/templates/includes/search_result.html" %}
</div>
<center>
	<h2>Search Voice Artist</h2>
<div class="row mb-12">
	<div class="col-sm-6">
		<form action="{{ route }}">
			<div class="input-group">
				<select name="category" id="category">
				<option value="language">Language</option>
				<option value="gender">Gender</option>
				<select>
				<input name="query" class="form-control" type="text" value="{{ query or '' }}"
					placeholder="{{ _('Search...') }}">
				<div class="input-group-append">
					<button type="submit" class="btn btn-sm btn-primary btn-search">
						{{ _('Search') }}
					</button>
				</div>
			</div>
			{% if frappe.form_dict.scope %}
				<input type="text" hidden name="scope" value="{{ frappe.utils.escape_html(frappe.form_dict.scope) }}">
			{% endif %}
		</form>
	</div>
</div>

</center>
<div class="content">
<center><h2>Voice Bank</h2></center>
<div class="container">
{% for data in data_list %}
	<div class="artist">
        <img src={{data['profile_image']}} alt="Dubbing Artist" width="100" height="100">
        <div class="artist-info">
            <h2>Name: {{data['first_name']}} {{data['last_name']}}</h2>
            <p><span>Gender:</span> {{data['gender']}}</p>
            <p><span>Category:</span> {{data['category']}}</p>
            <p><span>Language:</span> {{data['language']}}</p>
	    <p><span>Slang:</span> {{data['slang']}}</p>
	    <div>
            <audio controls>
  	    <source src={{data['voice']}} type="audio/mpeg">
	    </audio>
	    </div>
        </div>
    </div>
{% endfor %}
{% endblock %}
</div>
</body>
</html>
